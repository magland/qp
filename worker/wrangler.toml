name = "qp-worker"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Environment variables (set these via wrangler secret put or in Cloudflare dashboard)
# OPENROUTER_API_KEY - Global fallback key for all assistants (for cheap models)
# OPENROUTER_API_KEY_<ASSISTANT_NAME> - Optional per-assistant keys (for cheap models)
#   Examples:
#   - OPENROUTER_API_KEY_BIDS_ASSISTANT
#   - OPENROUTER_API_KEY_STAN_ASSISTANT
#   Assistant names are converted from "bids-assistant" to "BIDS_ASSISTANT" format
# ADMIN_KEY - for protected operations

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "qp-production-db"
database_id = "64eac6da-750c-4600-951d-cab8a0d16686"

# R2 Bucket binding
[[r2_buckets]]
binding = "CHAT_STORAGE"
bucket_name = "qp-chat-storage"

# KV Namespace binding for rate limiting
[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "6fe4bb582f484fb68b1fec987b9ec71e"
